<!DOCTYPE html><html><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bảng Tính Thu Nhập</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        .header {
            background-color: #fff3cd;
            font-weight: bold;
        }
        input {
            width: 100%;
            padding: 5px;
            box-sizing: border-box;
        }
        .readonly {
            background-color: #f8f9fa;
            border: none;
        }
        .total-highlight {
            background-color: #e8f5e9;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <table>
            <tbody><tr class="header">
                <td colspan="2">Vui lòng nhập các thông tin dưới đây</td>
            </tr>
            <tr>
                <td>1. Tháng</td>
                <td><input type="month" id="month"></td>
            </tr>
            <tr>
                <td>2. Lương cơ bản</td>
                <td><input type="number" id="baseSalary" onchange="calculate()"></td>
            </tr>
            <tr>
                <td>3. Ngày công thực tế</td>
                <td><input type="number" id="workDays" onchange="calculate()"></td>
            </tr>
            <tr>
                <td>4. % thực đạt doanh số</td>
                <td><input type="number" id="revenueAchievement" onchange="calculate()"></td>
            </tr>
            <tr>
                <td>5. Doanh số thực đạt</td>
                <td><input type="number" id="revenue" onchange="calculate()"></td>
            </tr>
            <tr>
                <td>6. Số đơn hàng/tháng</td>
                <td><input type="number" id="orders" onchange="calculate()"></td>
            </tr>
            <tr>
                <td>7. % thực đạt KPI</td>
                <td><input type="number" id="kpi" onchange="calculate()"></td>
            </tr>
            <tr>
                <td>8. Thưởng quý (2 mốc &gt;=105% hoặc 115%)</td>
                <td><input type="number" id="quarterlyTarget" onchange="calculate()"></td>
            </tr>

            <tr class="header">
                <td colspan="2">Kết quả tính toán thu nhập của bạn là</td>
            </tr>
            <tr>
                <td>1. Ngày công tính lương</td>
                <td><input type="text" id="salaryDays" class="readonly" readonly=""></td>
            </tr>
            <tr>
                <td>2. Lương cơ bản thực nhận</td>
                <td><input type="text" id="actualSalary" class="readonly" readonly=""></td>
            </tr>
            <tr>
                <td>3. Phụ cấp lạm phát</td>
                <td><input type="text" id="inflationAllowance" class="readonly" readonly=""></td>
            </tr>
            <tr>
                <td>4. Phụ cấp internet</td>
                <td><input type="text" id="internetAllowance" class="readonly" readonly=""></td>
            </tr>
            <tr>
                <td>5. Thưởng doanh số</td>
                <td><input type="text" id="revenueBonus" class="readonly" readonly=""></td>
            </tr>
            <tr>
                <td>6. Thưởng KPI</td>
                <td><input type="text" id="kpiBonus" class="readonly" readonly=""></td>
            </tr>
            <tr class="total-highlight">
                <td>7. Tổng thu nhập</td>
                <td><input type="text" id="totalIncome" class="readonly" readonly=""></td>
            </tr>
            <tr>
                <td>8. Thưởng quý</td>
                <td><input type="text" id="quarterlyBonus" class="readonly" readonly=""></td>
            </tr>
        </tbody></table>
    </div>

    <script>
        function formatCurrency(number) {
            return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(number);
        }

        function calculate() {
            // Lấy giá trị input
            const baseSalary = parseFloat(document.getElementById('baseSalary').value) || 0;
            const workDays = parseFloat(document.getElementById('workDays').value) || 0;
            const revenueAchievement = parseFloat(document.getElementById('revenueAchievement').value) || 0;
            const revenue = parseFloat(document.getElementById('revenue').value) || 0;
            const orders = parseFloat(document.getElementById('orders').value) || 0;
            const kpi = parseFloat(document.getElementById('kpi').value) || 0;
            const quarterlyTarget = parseFloat(document.getElementById('quarterlyTarget').value) || 0;

            // 1. Tính ngày công tính lương
            let salaryDays;
            if (revenueAchievement >= 100) {
                salaryDays = workDays;
            } else if (revenue < 62500000) {
                salaryDays = (revenue * workDays) / 62500000;
            } else {
                salaryDays = workDays;
            }

            // 2. Lương thực nhận
            const actualSalary = (baseSalary / 26) * salaryDays;

            // 3. Phụ cấp lạm phát
            const inflationAllowance = revenue >= 50000000 ? Math.round((500000 / 26) * salaryDays) : 0;

            // 4. Phụ cấp internet
            let internetAllowance;
            if (orders >= 75) {
                internetAllowance = (200000 / 26) * workDays;
            } else {
                internetAllowance = (orders * 200000) / 75;
            }

            // 5. Thưởng doanh số
            let revenueBonus = 0;
            if (revenueAchievement >= 115) {
                revenueBonus = revenue * 0.052;
            } else if (revenueAchievement >= 105) {
                revenueBonus = revenue * 0.042;
            } else if (revenueAchievement >= 100) {
                revenueBonus = revenue * 0.035;
            } else if (revenueAchievement >= 95) {
                revenueBonus = revenue * 0.035;
            } else if (revenueAchievement >= 90) {
                revenueBonus = revenue * 0.03;
            } else if (revenueAchievement < 85) {
                if (revenue >= 62500000) {
                    revenueBonus = revenue * 0.022;
                } else {
                    revenueBonus = revenue * 0.012;
                }
            } else if (revenueAchievement >= 85 && revenueAchievement < 90) {
                if (revenue >= 62500000) {
                    revenueBonus = revenue * 0.022;
                } else {
                    revenueBonus = revenue * 0.012;
                }
            }

            // 6. Thưởng KPI
            let kpiBonus = 0;
            if (kpi > 115) {
                kpiBonus = 585000;
            } else if (kpi > 105) {
                kpiBonus = 495000;
            } else if (kpi > 95) {
                kpiBonus = 405000;
            } else if (kpi > 85) {
                kpiBonus = 337500;
            }

            // 7. Tổng thu nhập
            const totalIncome = actualSalary + inflationAllowance + internetAllowance + revenueBonus + kpiBonus;

            // 8. Thưởng quý
            let quarterlyBonus = 0;
            if (quarterlyTarget >= 115) {
                quarterlyBonus = 1950000;
            } else if (quarterlyTarget >= 105) {
                quarterlyBonus = 1650000;
            }

            // Hiển thị kết quả
            document.getElementById('salaryDays').value = salaryDays.toFixed(2);
            document.getElementById('actualSalary').value = formatCurrency(actualSalary);
            document.getElementById('inflationAllowance').value = formatCurrency(inflationAllowance);
            document.getElementById('internetAllowance').value = formatCurrency(internetAllowance);
            document.getElementById('revenueBonus').value = formatCurrency(revenueBonus);
            document.getElementById('kpiBonus').value = formatCurrency(kpiBonus);
            document.getElementById('totalIncome').value = formatCurrency(totalIncome);
            document.getElementById('quarterlyBonus').value = formatCurrency(quarterlyBonus);
        }

        // Thêm sự kiện calculate cho trường month
        document.getElementById('month').addEventListener('change', calculate);
    </script>


</body></html>